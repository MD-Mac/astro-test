---
import { SITE_CONFIG } from '../config/site.ts';

// Get navigation items from config
const navItems = SITE_CONFIG.navigation.main;
const currentPath = Astro.url.pathname;
---
<nav>
    <div class="nav-container">
        <div class="nav-top">
            <div class="nav-top-left">
                <!-- hamburger menu -->
                <div class="hamburger-menu">
                    <div class="hamburger-menu-line top"></div>
                    <div class="hamburger-menu-line middle"></div>
                    <div class="hamburger-menu-line bottom"></div>
                </div>
            </div>
            <div class="nav-top-center">
                <a href="/" title={SITE_CONFIG.title}>
                    <?xml version="1.0" encoding="utf-8"?>
                    <!-- Generator: Adobe Illustrator 23.0.4, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                        viewBox="0 0 350 30" style="enable-background:new 0 0 350 30;" xml:space="preserve">
                    <g>
                        <path class="st0" d="M72.29,7.28h2.96c1.62,0,2.77,0.15,3.46,0.45c0.69,0.31,1.24,0.81,1.66,1.52C80.79,9.96,81,10.8,81,11.76
                            c0,1.02-0.23,1.86-0.7,2.54c-0.46,0.68-1.16,1.2-2.09,1.55l3.48,6.86h-3.05l-3.3-6.54h-0.25v6.54h-2.79V7.28z M75.08,13.32h0.88
                            c0.89,0,1.5-0.12,1.83-0.37c0.33-0.25,0.5-0.65,0.5-1.22c0-0.34-0.08-0.63-0.25-0.88c-0.16-0.25-0.39-0.43-0.66-0.54
                            c-0.28-0.11-0.79-0.16-1.53-0.16h-0.77V13.32z"/>
                        <polygon class="st0" points="89.48,7.28 92.31,7.28 92.31,13.11 97.21,13.11 97.21,7.28 100.03,7.28 100.03,22.72 97.21,22.72 
                            97.21,15.95 92.31,15.95 92.31,22.72 89.48,22.72 	"/>
                        <rect x="108.72" y="7.29" class="st0" width="2.77" height="15.43"/>
                        <polygon class="st0" points="120.18,7.28 122.86,7.28 129.14,17.44 129.14,7.28 131.93,7.28 131.93,22.72 129.25,22.72 
                            122.98,12.6 122.98,22.72 120.18,22.72 	"/>
                        <path class="st0" d="M147.75,6.9c2.08,0,3.86,0.79,5.36,2.37c1.49,1.58,2.24,3.51,2.24,5.78c0,2.25-0.74,4.16-2.21,5.72
                            c-1.47,1.56-3.26,2.34-5.37,2.34c-2.2,0-4.03-0.8-5.49-2.4c-1.46-1.6-2.19-3.51-2.19-5.71c0-1.48,0.34-2.83,1.02-4.07
                            s1.61-2.22,2.8-2.94C145.1,7.26,146.38,6.9,147.75,6.9 M147.72,9.77c-1.36,0-2.5,0.5-3.42,1.49c-0.93,0.99-1.39,2.26-1.39,3.79
                            c0,1.71,0.58,3.06,1.75,4.05c0.9,0.77,1.94,1.16,3.11,1.16c1.33,0,2.45-0.5,3.39-1.51c0.93-1.01,1.4-2.25,1.4-3.72
                            c0-1.47-0.47-2.71-1.41-3.73C150.2,10.28,149.06,9.77,147.72,9.77"/>
                        <path class="st0" d="M167.99,7.28h2.83l5.64,15.43h-2.9l-1.15-3.18h-5.99l-1.19,3.18h-2.9L167.99,7.28z M169.43,11.38l-1.97,5.3
                            h3.93L169.43,11.38z"/>
                        <polygon class="st0" points="184.2,7.28 191.49,7.28 191.49,10.15 186.98,10.15 186.98,12.95 191.49,12.95 191.49,15.77 
                            186.98,15.77 186.98,22.72 184.2,22.72 	"/>
                        <path class="st0" d="M199.69,7.28h2.96c1.62,0,2.77,0.15,3.46,0.45c0.69,0.31,1.24,0.81,1.66,1.52c0.42,0.71,0.63,1.54,0.63,2.51
                            c0,1.02-0.23,1.86-0.69,2.54c-0.46,0.68-1.16,1.2-2.09,1.55l3.48,6.86h-3.05l-3.3-6.54h-0.25v6.54h-2.79V7.28z M202.49,13.32h0.88
                            c0.89,0,1.5-0.12,1.83-0.37c0.33-0.25,0.5-0.65,0.5-1.22c0-0.34-0.08-0.63-0.25-0.88c-0.17-0.25-0.39-0.43-0.66-0.54
                            c-0.28-0.11-0.79-0.16-1.53-0.16h-0.76V13.32z"/>
                        <rect x="216.69" y="7.29" class="st0" width="2.77" height="15.43"/>
                        <path class="st0" d="M241.63,10l-1.95,1.96c-1.33-1.48-2.82-2.22-4.49-2.22c-1.4,0-2.58,0.5-3.54,1.51
                            c-0.96,1.01-1.44,2.25-1.44,3.73c0,1.03,0.21,1.94,0.64,2.74c0.43,0.8,1.03,1.43,1.8,1.88c0.78,0.45,1.64,0.68,2.59,0.68
                            c0.81,0,1.55-0.16,2.22-0.48c0.67-0.32,1.41-0.9,2.21-1.74l1.9,2.08c-1.09,1.11-2.11,1.89-3.07,2.32c-0.96,0.43-2.07,0.64-3.3,0.64
                            c-2.28,0-4.15-0.76-5.6-2.28c-1.45-1.52-2.18-3.47-2.18-5.85c0-1.54,0.33-2.91,0.99-4.1c0.66-1.2,1.61-2.16,2.84-2.89
                            c1.24-0.73,2.56-1.09,3.99-1.09c1.21,0,2.38,0.27,3.5,0.8C239.85,8.24,240.82,9.01,241.63,10"/>
                        <path class="st0" d="M254.09,7.28h2.83l5.64,15.43h-2.9l-1.15-3.18h-5.99l-1.2,3.18h-2.9L254.09,7.28z M255.52,11.38l-1.97,5.3
                            h3.93L255.52,11.38z"/>
                        <path class="st0" d="M271.45,19.73c0.43,0,0.8,0.16,1.11,0.48c0.31,0.32,0.46,0.71,0.46,1.16c0,0.45-0.15,0.84-0.46,1.16
                            c-0.31,0.32-0.67,0.48-1.11,0.48c-0.43,0-0.8-0.16-1.11-0.48c-0.31-0.32-0.46-0.71-0.46-1.16c0-0.45,0.15-0.84,0.46-1.16
                            C270.65,19.89,271.01,19.73,271.45,19.73"/>
                        <path class="st0" d="M295.29,10.15l-1.16,0.93c-0.64-0.87-1.41-1.53-2.3-1.99c-0.89-0.45-1.88-0.68-2.95-0.68
                            c-1.17,0-2.26,0.3-3.25,0.89c-1,0.59-1.77,1.38-2.32,2.38c-0.55,1-0.82,2.12-0.82,3.36c0,1.88,0.61,3.45,1.84,4.71
                            c1.23,1.26,2.77,1.89,4.64,1.89c2.05,0,3.77-0.84,5.16-2.54l1.16,0.92c-0.74,0.98-1.64,1.73-2.74,2.27
                            c-1.09,0.53-2.32,0.8-3.66,0.8c-2.57,0-4.6-0.9-6.08-2.7c-1.24-1.52-1.86-3.35-1.86-5.5c0-2.26,0.75-4.16,2.26-5.7
                            c1.51-1.54,3.4-2.31,5.66-2.31c1.37,0,2.61,0.28,3.71,0.85C293.68,8.32,294.58,9.12,295.29,10.15"/>
                        <path class="st0" d="M310.76,6.9c2.22,0,4.08,0.78,5.58,2.34c1.5,1.56,2.24,3.48,2.24,5.76c0,2.26-0.74,4.17-2.24,5.75
                            c-1.5,1.57-3.32,2.36-5.47,2.36c-2.18,0-4.01-0.78-5.51-2.35c-1.5-1.57-2.25-3.46-2.25-5.69c0-1.48,0.35-2.86,1.03-4.12
                            c0.68-1.27,1.61-2.26,2.79-2.98C308.11,7.25,309.38,6.9,310.76,6.9 M310.82,8.4c-1.09,0-2.12,0.3-3.09,0.89
                            c-0.97,0.59-1.73,1.4-2.28,2.4c-0.54,1.01-0.82,2.13-0.82,3.37c0,1.83,0.6,3.38,1.81,4.65s2.67,1.89,4.37,1.89
                            c1.14,0,2.19-0.29,3.16-0.87c0.97-0.58,1.73-1.37,2.27-2.38c0.54-1.01,0.81-2.13,0.81-3.36c0-1.23-0.27-2.33-0.81-3.32
                            c-0.54-0.99-1.31-1.78-2.29-2.38C312.97,8.69,311.93,8.4,310.82,8.4"/>
                        <polygon class="st0" points="340.6,7.28 334.7,19.95 328.73,7.28 328.49,7.28 326.39,22.72 327.81,22.72 329.25,11.6 334.5,22.72 
                            334.88,22.72 340.06,11.68 341.52,22.72 342.95,22.72 340.84,7.28 	"/>
                        <path class="st0" d="M47.1,14.85c0,0,0.18,0.92,0.84,0.94c0.66,0.02,0.45-1.2-0.02-0.83C47.44,15.33,47.1,14.85,47.1,14.85
                            M43.36,4.97c-0.26-0.05-0.19,0.19,0.02,0.41c0.23,0.21,0.05,0.62-0.14,0.9c-0.2,0.28-0.22,1.29,0.39,1.61
                            c0.61,0.32,0.85,0.92,1.04,1.05c0.18,0.13,0.57,0.13,0.54-0.19c-0.04-0.32,0.12-0.99,0.23-1.22c0.11-0.21,0.27-0.21,0.02-1.2
                            c-0.25-0.97-0.63-0.84-1.16-0.88C43.73,5.44,43.63,5.03,43.36,4.97 M13.5,7.16c1.09-1.03,2.28-2.55,4.89-2.72
                            c2.58-0.17,3.63-0.23,6.16-0.56c2.53-0.35,2.42,1.44,5.67,1.61c3.24,0.17,5.67-1.14,7.38-1.5c1.69-0.35,2.43,0.37,3.19,0.23
                            c0.77-0.17,2.37-1.16,3.9-0.11c1.53,1.05,1.16,2.17,2.35,2.68c1.21,0.51,2.46,0,3.22-0.49c0.77-0.49,1.09-1.24,1.62-1.52
                            c0.54-0.28,0.96-0.17,0.96-0.17s-0.46,0.65-0.61,1.53c-0.15,0.88-0.64,1.78-1.3,1.97c-0.66,0.2-1.28,0.19-1.19,0.71
                            c0.07,0.51,0.5,2.83,0.82,3.24c0.31,0.41,0.66,0.73,1.2,0.15c0.55-0.58,1.09-1.8,1.09-1.8s0.28,3.47,0,4.14
                            c-0.29,0.69,0.28,0.36,0.55,0.25c0.27-0.09,1.5-0.71,2.42-1.76c0.94-1.07,1.44-1.63,1.43-0.94c-0.02,0.69-1.44,3.33-1.78,4.65
                            c-0.34,1.31-1.12,1.12-1.12,1.67c0,0.54,0.89,1.37,0.69,2.1c-0.19,0.73-0.96,1.8-1.89,1.8c-0.94,0-0.8-0.34-1.71-0.07
                            c-0.91,0.26-1-0.35-1.85-0.64c-0.84-0.28-2.74-1.37-3.21-1.74c-0.39-0.34-0.68-0.64-1.02-1.03c-0.62-0.88-2.51-3.13-3.03-4.5
                            c-0.62-1.65-1.28-3.82-1.28-3.82c0,0.05,0.02,2.83,0.32,4.21c0.36,1.65,1.16,3.63,2.16,4.5c-0.57,0.26-1.23,0.51-1.66,1.18
                            c-0.6,0.95-1.16,1.12-1.37,1.65c-0.21,0.51-0.21,1.91,0.05,2.51c0.14,0.3,0.39,1.03,0.66,1.78h-7.97c0.52-0.92,1.27-2.17,1.57-2.74
                            c0.41-0.77,0.86-1.63,0.43-1.7c-0.16-0.32-0.45-0.9-0.57-1.26c-0.18-0.51-0.43-0.97-0.87-1.27c-0.45-0.3-0.71-0.24-1.28-0.71
                            c-0.57-0.47,0.02-3.33,0.16-3.48c0.13-0.13,0-0.19,0-0.19s-1.26,2.87-1.5,3.99c-0.19,0.95,0.64,2.98,0.91,3.64
                            c-1.85,0.37-4.24,0.73-6.2,0.54c-2.76-0.26-4.22-1.35-4.88-1.89c0-0.02-2.92-2.34-3.88-4.22c-0.96-1.85-1.67-4.8-1.37-7.38
                            c0.3-2.59-0.23,0.97-0.23,0.97s-0.23,7.12,0.16,8.58c-0.3,0.53-1.14,2.21-1.21,2.89c-0.05,0.54-0.22,2.83-0.32,4.25H9.78
                            c0.3-0.52,1.57-2.64,1.8-3.9c0.25-1.43-0.3-2.91-0.29-4.29c0.02-1.39-0.64-2.68-0.66-3.47c-0.02-0.77-0.25-2.96,0.21-3.88
                            c0.41-0.86-2.94,2.59-3.8,3.35V12.2C7.51,11.94,12.41,8.21,13.5,7.16 M19.56,25.43c-0.3,0.54-1.05,0.81-1.83,0.94h-2.28
                            c0.13-0.39,0.78-2.47,0.76-3.5c-0.04-0.95,0.23-1.78,0.14-2.36c1.14,1.22,2.98,2.55,3.39,2.85c0.11,0.07,0.22,0.13,0.3,0.17
                            C19.95,24.25,19.81,24.98,19.56,25.43"/>
                    </g>
                    </svg>
                    
                </a>
            </div>
            <div class="nav-top-right">
                <a class="btn" href="/contact/">
                    <span>Let's start planning</span>
                </a>
            </div>
        </div>
        <div class="nav-bottom">
            {navItems.map(item => (
                <a 
                    href={item.href}
                    class={currentPath === item.href ? 'active' : ''}
                    title={item.description}
                >
                    {item.title}
                </a>
            ))}
        </div>
    </div>
</nav>

<style lang="scss">
    nav {
        position: fixed;
        z-index: 100;
        top: 0;
        left: 0;
        width: 100%;
        padding: 40px 20px 10px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        color: #fff;
        background-color: transparent;
        /* border-bottom: 1px solid #e2e8f0; */
        transition: background-color 0.3s ease, transform 0.3s ease;

        &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 110%;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.95), rgba(0, 0, 0, 0));
            z-index: -1;
        }

        a {
            text-decoration: none;
            color: inherit;
            font-size: 14px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 10px 20px;
        }

        // Nav Hover
        &:hover {
            background-color: #fff;
            color: #272727;

            &::before {
                opacity: 0;
            }

            .nav-top svg {
                fill: #900;
            }

            .nav-top-right .btn {
                background-color: #66944C;
                color: #fff;
            }

            .hamburger-menu-line {
                background-color: #272727;
            }
        }
    }

    .nav-container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
    }

    .nav-top {
        display: flex;
        justify-content: center;
        align-items: center;

        svg {
            height: 30px;
            fill: #fff;
            transition: fill 0.3s ease;
        }
    }


    .nav-top-center {
        width: 350px;

        a {
            padding: 0;
        }
    } 

    .nav-top-right,
    .nav-top-left {
        width: calc(50% - 175px);
    }

    .nav-top-right {
        display: flex;
        justify-content: flex-end;

        .btn {
            background-color: #fff;
            color: #272727;
            padding: 15px 20px;
            border-radius: 30px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
    }

    .nav-top-left {
        display: flex;
        justify-content: flex-start;
    }

    .nav-bottom {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
    }

    .hamburger-menu {
        display: block;
        width: 30px;
        height: 30px;
        cursor: pointer;

        .hamburger-menu-line {  
            width: 100%;
            height: 2px;
            background-color: #fff;
            margin-bottom: 5px;
            transition: all 0.3s ease;
        }

        &:hover {
            .hamburger-menu-line {
                background-color: #900;
            }

            .hamburger-menu-line.top {
                transform: rotate(45deg) translateY(8px) translateX(6px);
                transform-origin: center;
            }

            .hamburger-menu-line.middle {
                opacity: 0;
            }

            .hamburger-menu-line.bottom {
                transform: rotate(-45deg) translateY(-3px) translateX(2px);
                transform-origin: center;
            }
        }
    }
</style>

<script>
    // Hide/show navigation on scroll
    let lastScrollY = window.scrollY;
    let ticking = false;

    function updateNavigation() {
        const nav = document.querySelector('nav');
        if (!nav) return;
        
        const currentScrollY = window.scrollY;
        
        if (currentScrollY > lastScrollY && currentScrollY > 100) {
            // Scrolling down & past 100px - hide nav
            nav.style.transform = 'translateY(-100%)';
        } else {
            // Scrolling up or at top - show nav
            nav.style.transform = 'translateY(0)';
        }
        
        lastScrollY = currentScrollY;
        ticking = false;
    }

    function onScroll() {
        if (!ticking) {
            requestAnimationFrame(updateNavigation);
            ticking = true;
        }
    }

    // Add scroll listener when page loads
    window.addEventListener('scroll', onScroll);
</script>